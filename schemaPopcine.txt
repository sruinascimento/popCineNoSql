let schemaMovie = {
    required: ["titulo", "sinopse", "duracao", "dataEstreia", "classificacao", "genero", "elenco", "diretor"],
    properties: {
        "titulo": {
            bsonType: "string",
            description: "must be a string and required"
        },
        "sinopse": {
            bsonType: "string",
            description: "must be a string and required"

        },
        "duracao": {
            bsonType: "int",
            description: "must be an int value and required"        
        },
        "dataEstreia": {
            bsonType: "date",
            description: "must be a date type and required"        
        },
        "classificacao": {
            bsonType: "string",
            description: "must be a string and required",
            enum: [
                "Livre", "10 anos", "12 anos", 
                "14 anos", "16 anos", " 18 anos", 
            ]        

        },
        "orcamento": {
            bsonType: "double",
            description: "must be a double value"
        },
        "bilheteria": {
            bsonType: "double",
            description: "must be a double value"
            
        },
        "genero": {
            bsonType: "string",
            description: "must be a string and required"
            
        },
        "elenco": {
            bsonType: ["string"],
            description: "must be a string array and required"

        },
        "diretor": {
            bsonType: "string",
            description: "must be a string and required"
        }

    }
}

//index de genero

db.createCollection("Movie", {validator: {$jsonSchema: schemaMovie}})

db.Movie.insertOne({
    "titulo": "Viúva Negra",
    "sinopse": "Natasha Romanoff, também conhecida como Viúva Negra, confronta o lado mais sombrio de sua história quando surge uma perigosa conspiração ligada ao seu passado. Perseguida por uma força implacável disposta a tudo para destruí-la, Natasha precisa agora lidar com seu passado como espiã e com as relações que deixou para trás muito antes de se tornar uma Vingadora.",
    "duracao": NumberInt(135),
    "dataEstreia": new Date("2021-07-08"),
    "classificacao": "12 anos",
    "orcamento": 200000000,
    "bilheteria": 369811000
});

let schemaCliente = {
    required: ["nome", "dataNascimento", "login"],
    properties: {
        "nome": {
            bsonType: "string",
            description: "must be a string and required"
        },
        "dataNascimento": {
            bsonType: "date",
            description: "must be a date type and required"  
        },
       "login": {
            bsonType: "objetId",
            description: "must be a objectId and required"  
        }

    }
}

db.createCollection("Cliente", {validator: {$jsonSchema: schemaCliente}});

let schemaLogin = {
    required: ["email", "senha"],
    properties: {
        "email": {
            bsonType: "string",
            description: "must be a string and required"
        },
        "senha": {
            bsonType: "string",
            description: "must be a string type and required"  
        }
    }
}

db.createCollection("Login", {validator: {$jsonSchema: schemaLogin}});


let schemaIngresso = {
    required: ["dataCompra", "formaPagamento", "tipoIngresso", "nomeFilme", "poltrona", "sala", "sessao"],
    properties: {
        "dataCompra": {
            bsonType: "date",
            description: "must be a date type and required"
        },
        "formaPagamento": {
            bsonType: "string",
            description: "must be a string type and required",
            enum : ["Boleto", "Pix", "Cartão Crédito", "Cartão Débito"]
        },
        "tipoIngresso": {
            bsonType: "string",
            description: "must be a string type and required",
            enum : ["Meia", "Inteira"]
        },
        "nomeFilme": {
            bsonType: "string",
            description: "must be a string type and required",
        },
        "poltrona": {
            bsonType: "string",
            description: "must be a string type and required"
        },
        "sala": {
            bsonType: "string",
            description: "must be a string type and required"
        },
        "sessao": {
            bsonType: "date",
            description: "must be date type and required"
        }

    }
}

db.createCollection("Ingresso", {validator: {$jsonSchema: schemaIngresso}});

let schemaSala = {
    required: ["nomeSala", "capacidade"],
    properties: {
        "nomeSala": {
            bsonType: "string",
            description: "must be a string and required"
        },
        "capacidade": {
            bsonType: "int",
            description: "must be a int and required"

        },

    }
}

db.createCollection("Sala", {validator: {$jsonSchema: schemaSala}});

let schemaSessao = {
    required: ["filme", "dataHora", "nomeSala"],
    properties: {
        "filme": {
            bsonType: "string",
            description: "must be a string and required"
        },
        "dataHora": {
            bsonType: "date",
            description: "must be a date type and required"

        },
        "nomeSala": {
            bsonType: "string",
            description: "must be a string and required"
        }
    }
}

db.createCollection("Sessao", {validator: {$jsonSchema: schemaSessao}});

let schemaLegenda = {
    required: ["tradutores", "idiomaLegenda", "nomeFilme"],
    properties: {
        "tradutores": {
            bsonType: ["string"],
            description: "must be a array string and required"
        },
        "idiomaLegenda": {
            bsonType: ["string"],
            description: "must be a array string and required"
        },
        "idiomaFilme": {
            bsonType: ["string"],
            description: "must be a array string and required"
        },
        "nomeFilme": {
            bsonType: "string",
            description: "must be a string and required"

        }
    }
}

db.createCollection("Legenda", {validator: {$jsonSchema: schemaLegenda}});

let schemaEmBreve = {
    required: ["nomeFilme", "sinopse", "trailer", "dataEstreia"],
    properties: {
        "nomeFilme": {
            bsonType: "string",
            description: "must be a string and required"
        },
        "sinopse": {
            bsonType: "string",
            description: "must be a string and required"
        },
        "trailer": {
            bsonType: "string",
            description: "must be a string and required"
        },
        "dataEstreia": {
            bsonType: "date",
            description: "must be a date type and required"

        },
        "duracao": {
            bsonType: "int",
            description: "must be a int and required"
        },
        "atores": {
            bsonType: ["string"],
            description: "must be a array string and required"
        }
    }
}

db.createCollection("EmBreve", {validator: {$jsonSchema: schemaEmBreve}});

